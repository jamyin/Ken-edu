<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ssic.education.app.mapper.AppUsersMapper">
	<select id="findBy" resultType="com.ssic.education.app.dto.EduUsersInfoDto">
		select users.id as id, age as age,createdatetime as
		createdatetime,gender as gender,isAdmin as isAdmin,isDelete as
		isDelete,modifydatetime as modifydatetime,name,
		users.pj_no as
		pjNo,post_no as postNo,password as password,qjy_account as
		qjyAccount,user_account as userAccount,user_image as
		userImage,user_no
		as userNo,email
		from t_edu_users users where users.stat=1
		<include refid="where_clause_1" />
	</select>

	<sql id="where_clause_1">
		<if test="user.id!=null and user.id!=''">
			and users.id = #{user.id}
		</if>
		<if test="user.userNo!=null and user.userNo!=''">
			and users.user_no =#{user.userNo}
		</if>
		<if test="user.password != null and user.password!=''">
			and users.password = #{user.password}
		</if>
		<if test="user.userAccount!=null and user.userAccount!=''">
			and users.user_account = #{user.userAccount}
		</if>
		<if test="user.name != null and user.name!=''">
			and users.name =
			#{user.name}
		</if>
		<if test="user.createdatetimeStart!=null">
			and users.createdatetime &gt;= #{user.createdatetimeStart}
		</if>
		<if test="user.createdatetimeEnd!=null">
			and users.createdatetime &lt;= #{user.createdatetimeEnd}
		</if>
		<if test="user.modifydatetimeStart!=null">
			and users.modifydatetime &gt;= #{user.modifydatetimeStart}
		</if>
		<if test="user.modifydatetimeEnd!=null">
			and users.modifydatetime &lt;=#{user.modifydatetimeEnd}
		</if>
		<if test="user.searchName!=null and user.searchName!=''">
			and users.user_account like #{user.searchName}
		</if>

	</sql>

	<select id="selectLoginInfo" resultType="com.ssic.education.government.dto.EduAppUserDto">
		select u.id as id,u.name as name,u.source_id as source_id,u.source_type as source_type
		u.gender as gender,u.pj_no as pj_no
		from t_edu_users u
		where users.stat=1 and isAdmin=1 and isDelete =1
		<include refid="where_clause_1" />
		and
	</select>
</mapper>