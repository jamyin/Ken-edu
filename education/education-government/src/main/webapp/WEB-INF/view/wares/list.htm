<!DOCTYPE html>
<html>
<head>
  <#include "/common/head.htm" />
  <link rel="stylesheet" href="/static/css/material_list.css" media="screen" charset="utf-8">
</head>
<body>
<#include "/common/nav.htm" />

  <div class="wrapperA">
    <form action="/pro/wares/waresPages.htm?schoolId=${(params.schoolId)!}&sourceId=${(params.sourceId)!}" method="post" id="myform">
      <h1 class="con-tt"><span class="title"><#if params.dishes>成品<#else>原料</#if>列表</span>
        <span>
          <input type="hidden" name="dishes" value="${(params.dishes)!}"/>
          <input type="hidden" name="supplierId" value="${(params.supplierId)!}"/>
          <input type="hidden" name="currPage" id="currPage" value="1"/>
          <input class="search" type="button" id="search_btn">
          <input class="search_text" type="text" name="waresName" placeholder="请输入关键字" value="${(params.waresName)!}">
        </span>
      </h1>
    </form>
    <div class="item-list">
      <ul>
        <#if pageList??>
          <#list pageList.results as data>
	          <a href="/pro/wares/details.htm?id=${(data.id)!}">
	              <li>
	                <img src="${(data.image)!}" alt="" />
	                <div class="name">${(data.waresName)!}</div>
	                <div>分类:<span>${(data.waresTypeStr)!}</span></div>
	                <div>规格:<span>${(data.spec)!}</span></div>
	              </li>
	           </a>
          </#list>
        </#if>
      </ul>
    </div>
    <#include "/common/page.htm" />
  </div>
<#include "/common/footer.htm" />

  <script type="text/javascript">
    $(function(){
      // debugger;
      $(".nav").find("a").removeClass("cur");
      $(".nav").find("a:eq(1)").addClass("cur");

      $("#search_btn").on('click', function (){
        $("#myform").submit();
      });

      // 跳转指定页
      $('#jump_btn').on('click', function () {
        var jump_num = $('#jump_num').val();
        if (jump_num != '') {
          var reg = /^[-+]?\d*$/;
          if (!reg.test(jump_num)) {
            alert("对不起，您输入的跳转页数格式不正确!");//请将“整数类型”要换成你要验证的那个属性名称！
            return;
          }
        <#if pageList?? && pageList.total gt 0>
          if (jump_num > ${(pageList.totalPage)!}) {
            alert("对不起，您输入的跳转页数大于总页数!");
            return;
          }
        </#if>
        } else {
          alert("对不起，您输入的跳转页数!");
          return;
        }
        gotoPage(jump_num);
      });
    })

    function gotoPage(page) {
      $("currPage").val(page);
      $("#myform").submit();
    }
  </script>
</body>
</html>
